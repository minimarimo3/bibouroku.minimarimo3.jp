<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Typstでブログを書く</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@300..700&amp;family=Noto+Serif+JP:wght@400;700&amp;display=swap">
    <script src="/script.js">
    </script>
    <link rel="stylesheet" href="/style.css">
    <meta name="description" content="Typst v0.14の新機能を使って、Typstだけでブログシステムを構築する試み。">
    <meta property="og:title" content="Typstでブログを書く">
    <div class="raw-html-embed" data-html="<!-- Cloudflare Web Analytics --><script defer src='https://static.cloudflareinsights.com/beacon.min.js' data-cf-beacon='{&quot;token&quot;: &quot;4b32234cfe9741ea8a4437f109f7b029&quot;}'></script><!-- End Cloudflare Web Analytics -->"></div>
  </head>
  <body>
    <div class="site-container">
      <main class="main-content">
        <article>
          <header class="article-header">
            <p><a class="back-home-btn" href="/">← ホームに戻る</a></p>
            <h1 class="article-title">Typstでブログを書く</h1>
            <div class="article-meta">
              <div class="meta-dates"><span class="meta-date">文書作成日: 2025-12-14</span><span class="meta-date">最終更新日: 2025-12-15</span></div>
              <div class="meta-tags"><span class="tag">#Typst</span><span class="tag">#HTML</span></div>
            </div>
          </header>
          <div class="mobile-toc"><details><summary>目次を開く</summary><nav role="doc-toc"><ol style="list-style-type: none"><li><a href="#はじめに"><span class="prefix">1.</span> はじめに</a></li><li><a href="#loc-2"><span class="prefix">2.</span> ファイル構成</a></li><li><div><a href="#loc-3"><span class="prefix">3.</span> 実装</a></div><ol style="list-style-type: none"><li><a href="#loc-4"><span class="prefix">3.1.</span> <code>html.html</code>で出力されるHTMLの構造をカスタマイズ</a></li><li><a href="#loc-5"><span class="prefix">3.2.</span> 関連記事のランダム生成</a></li><li><a href="#loc-6"><span class="prefix">3.3.</span> 記事の情報をTypstで管理する</a></li><li><div><a href="#loc-7"><span class="prefix">3.4.</span> 未実装機能への対処</a></div><ol style="list-style-type: none"><li><a href="#loc-8"><span class="prefix">3.4.1.</span> 数式(Math)をSVG化して埋め込む</a></li><li><a href="#loc-9"><span class="prefix">3.4.2.</span> カスタムHTML構造での注釈(Footnote)</a></li></ol></li></ol></li><li><a href="#loc-10"><span class="prefix">4.</span> まとめ</a></li><li><a href="#loc-11">参考文献</a></li></ol></nav></details></div>
          <div class="article-abstract">
            <p><strong class="abstract-title">概要</strong></p>
            <p>Typst v0.14の新機能を使って、Typstだけでブログシステムを構築する試み。</p>
          </div>
          <div class="article-body">
            <div class="markdown-alert markdown-alert-note">
              <p class="markdown-alert-title"><span class="markdown-alert-icon">ℹ️</span>補足</p>
              <div class="markdown-alert-content">この記事は<a href="https://qiita.com/advent-calendar/2025/typst">Typst Advent Calender 2025</a>の23日目の記事です。</div>
            </div>
            <h2>執筆環境</h2>
            <table>
              <thead>
                <tr>
                  <th>ソフト名</th>
                  <th>バージョン</th>
                  <th>補足</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>Typst</td>
                  <td>0.14</td>
                  <td>TYPST_FEATURES=html</td>
                </tr>
                <tr>
                  <td>Tinymist Typst</td>
                  <td>0.14.4</td>
                  <td>—</td>
                </tr>
              </tbody>
            </table>
            <h2 id="はじめに">1. はじめに</h2>
            <p>Typst、とてもいいですよね。 Markdownのような手軽な書き心地でありながら、図表や脚注、参考文献まで美しく扱えるため、私も愛用しています。</p>
            <p>そんなTypstですが、バージョン0.14でHTMLエクスポート機能が大幅に強化されました。 セマンティックな要素のほとんど<span class="footnote-wrapper"><span class="footnote-marker">※0</span><span class="footnote-content">例えばカスタムHTML内での標準footnoteなど、一部未対応の機能もあります。</span></span>が適切なHTMLタグに変換されるようになったほか<a id="loc-1" href="#loc-12" role="doc-biblioref">[1]</a>、<code>html.elem</code> を使うことで任意のHTMLタグを生成可能になりました。 つまり、TypstからHTMLのDOMツリーを直接操作できるようになったのです。</p>
            <p>そこで今回はこの機能を活用して、Typstだけで記述・構築するブログシステムを作ってみました。 一般的なSSG（静的サイトジェネレータ）を使わず、記事の執筆からメタデータ管理までをTypst内部で完結させる仕組みです。</p>
            <p>なお本システムのスクリプトはWTFPLライセンスで公開していますが、あくまで個人利用を目的とした実験的なものです。 その点はご了承ください。</p>
            <h2 id="loc-2">2. ファイル構成</h2>
            <p>本ブログのファイル構成は以下の通りです（<a href="#ファイル構成">コード 1</a>）。</p>
            <p>ルートディレクトリには、システムの中核となる5つのファイルを配置しています。</p>
            <ul>
              <li><code>index.typ</code>: トップページ（<a href="https://bibouroku.minimarimo3.jp">https://bibouroku.minimarimo3.jp</a>）の生成元。</li>
              <li><code>style.css</code>: サイト全体のデザイン定義。</li>
              <li><code>posts.typ</code>: 全記事のメタデータ（タイトル、公開日、概要など）を集約管理するデータベース的なファイル。</li>
              <li><code>template.typ</code>: 記事の共通レイアウトやデザインを定義したテンプレート。</li>
              <li><code>build.py</code>: ビルドスクリプト。<code>posts.typ</code> から情報を読み取り、ディレクトリ走査やTypstコンパイル、静的ファイルの配置を一括で行います。</li>
            </ul>
            <p>ビルドの成果物は <code>public</code> ディレクトリに出力され、この中身がそのままWebサイトとして公開されます。</p>
            <p>各記事は個別のディレクトリで管理しており、そこに執筆した <code>index.typ</code> を配置して <code>posts.typ</code> に登録することで、ビルド対象として認識される仕組みです。 なお、記事ファイル名を <code>index.typ</code> としているのは、ビルド後の <code>index.html</code>（ディレクトリへのアクセス時にデフォルトで表示されるファイル）に対応させるためです。</p>
            <figure id="ファイル構成">
              <pre><code data-lang="sh"><span style="color: #4b69c6">BIBOUROKU.MINIMARIMO3.JP</span><br><span style="color: #4b69c6">│</span>  index.typ      <span style="color: #74747c">#</span><span style="color: #74747c"> トップページ</span><br><span style="color: #4b69c6">│</span>  style.css      <span style="color: #74747c">#</span><span style="color: #74747c"> サイト全体のテーマを設定するファイル</span><br><span style="color: #4b69c6">│</span>  posts.typ      <span style="color: #74747c">#</span><span style="color: #74747c"> 公開対象の記事のメタデータを記述するファイル</span><br><span style="color: #4b69c6">│</span>  template.typ   <span style="color: #74747c">#</span><span style="color: #74747c"> 記事のテンプレート</span><br><span style="color: #4b69c6">│</span>  build.py       <span style="color: #74747c">#</span><span style="color: #74747c"> posts.typのデータをもとにディレクトリを走査し、ビルドと添付ファイルの移動を行うスクリプト</span><br><span style="color: #4b69c6">│</span><br><span style="color: #4b69c6">├─public          </span><span style="color: #74747c">#</span><span style="color: #74747c"> ビルド後の出力先</span><br><span style="color: #4b69c6">│</span>  │  index.html<br><span style="color: #4b69c6">│</span>  │  style.css<br><span style="color: #4b69c6">│</span>  │  feed.xml    <span style="color: #74747c">#</span><span style="color: #74747c"> build.pyによって生成されます</span><br><span style="color: #4b69c6">│</span>  │  sitemap.xml <span style="color: #74747c">#</span><span style="color: #74747c"> build.pyによって生成されます</span><br><span style="color: #4b69c6">│</span>  │<br><span style="color: #4b69c6">│</span>  ├─Typstでブログを書く<br><span style="color: #4b69c6">│</span>  │      index.html<br><span style="color: #4b69c6">│</span>  │      index.pdf<br><span style="color: #4b69c6">│</span>  │<br><span style="color: #4b69c6">│</span>  └─テスト<br><span style="color: #4b69c6">│</span>          index.html<br><span style="color: #4b69c6">│</span>          index.pdf<br><span style="color: #4b69c6">│</span>          テスト用画像.png<br><span style="color: #4b69c6">│</span><br><span style="color: #4b69c6">├─Typstでブログを書く </span><span style="color: #74747c">#</span><span style="color: #74747c"> 記事1</span><br><span style="color: #4b69c6">│</span>      index.pdf<br><span style="color: #4b69c6">│</span>      index.typ<br><span style="color: #4b69c6">│</span>      Typstでブログを書く.yaml<br><span style="color: #4b69c6">│</span><br><span style="color: #4b69c6">├─テスト             </span><span style="color: #74747c">#</span><span style="color: #74747c"> 記事2</span><br><span style="color: #4b69c6">│</span>      index.pdf<br><span style="color: #4b69c6">│</span>      index.typ<br><span style="color: #4b69c6">│</span>      reference.bib<br><span style="color: #4b69c6">│</span>      テスト用画像.png<br><span style="color: #4b69c6">│</span><br><span style="color: #4b69c6">└─.github</span><br>  <span style="color: #4b69c6">└─workflows</span><br>          <span style="color: #4b69c6">deploy.yml</span></code></pre>
              <figcaption>コード 1: 当ブログのファイル構成</figcaption>
            </figure>
            <h2 id="loc-3">3. 実装</h2>
            <h3 id="loc-4">3.1. <code>html.html</code>で出力されるHTMLの構造をカスタマイズ</h3>
            <p>TypstのHTMLエクスポートは通常、文書内容を <code>&lt;body></code> タグ内に出力します。しかし、<code>&lt;head></code> 内にOGPタグや外部CSS読み込みを記述したい場合、これでは不十分です。 そこで <code>template.typ</code> では、<code>html.html</code> 関数を使用して <code>&lt;html></code> タグから始まる完全なDOM構造を定義しました。</p>
            <pre><code data-lang="typc">html.<span style="color: #4b69c6">html</span>(lang: <span style="color: #198810">"ja"</span>, {<br>  html.<span style="color: #4b69c6">head</span>({<br>    html.<span style="color: #4b69c6">meta</span>(charset: <span style="color: #198810">"utf-8"</span>)<br>    html.<span style="color: #4b69c6">meta</span>(name: <span style="color: #198810">"viewport"</span>, content: <span style="color: #198810">"width=device-width, initial-scale=1"</span>)<br>    html.<span style="color: #4b69c6">title</span>(title)<br>    <br>    <span style="color: #74747c">// OGP設定やGoogle Fontsの読み込み</span><br>    <span style="color: #d73948">if</span> description <span style="color: #d73948">!=</span> <span style="color: #198810">""</span> {<br>      html.<span style="color: #4b69c6">meta</span>(name: <span style="color: #198810">"description"</span>, content: description)<br>    }<br>    html.<span style="color: #4b69c6">elem</span>(<span style="color: #198810">"meta"</span>, attrs: (property: <span style="color: #198810">"og:title"</span>, content: title))<br>    html.<span style="color: #4b69c6">link</span>(rel: <span style="color: #198810">"preconnect"</span>, href: <span style="color: #198810">"https://fonts.googleapis.com"</span>)<br>    html.<span style="color: #4b69c6">link</span>(rel: <span style="color: #198810">"preconnect"</span>, href: <span style="color: #198810">"https://fonts.gstatic.com"</span>, crossorigin: <span style="color: #198810">"anonymous"</span>)<br>    <br>    html.<span style="color: #4b69c6">script</span>(src: <span style="color: #198810">"/script.js"</span>)<br>    html.<span style="color: #4b69c6">link</span>(rel: <span style="color: #198810">"stylesheet"</span>, href: <span style="color: #198810">"/style.css"</span>)<br>  })<br>  <br>  html.<span style="color: #4b69c6">body</span>({<br>    html.<span style="color: #4b69c6">div</span>(class: <span style="color: #198810">"site-container"</span>, {<br>      <span style="color: #74747c">// ヘッダー、記事本文、サイドバーなどを自由に配置</span><br>      html.<span style="color: #4b69c6">main</span>(class: <span style="color: #198810">"main-content"</span>, body)<br>      html.<span style="color: #4b69c6">aside</span>(class: <span style="color: #198810">"sidebar"</span>, { ... })<br>    })<br>  })<br>})</code></pre>
            <p>これにより、TypstだけでSEO対策やスタイリングに必要な構造を自由自在に作り込むことができます。</p>
            <h3 id="loc-5">3.2. 関連記事のランダム生成</h3>
            <p>ブログとしての回遊性を高めるため、記事下部に関連記事を表示しています。 単にランダムに選ぶとビルドのたびに内容が変わってしまうため、記事タイトルのハッシュ値をシード（種）として使用し、乱数生成器を初期化することで、ランダムでありながら常に同じ結果が得られるように工夫しました。</p>
            <pre><code data-lang="typc"><span style="color: #74747c">// template.typより抜粋</span><br>#<span style="color: #d73948">import</span> <span style="color: #198810">"@preview/suiji:0.5.0"</span>: <span style="color: #d73948">*</span><br><br><span style="color: #74747c">// 記事タイトルを数値化してシードにする</span><br><span style="color: #d73948">let</span> seed <span style="color: #d73948">=</span> <span style="color: #4b69c6">int</span>(title.<span style="color: #4b69c6">clusters</span>().<span style="color: #4b69c6">map</span>(str.to-unicode).<span style="color: #4b69c6">map</span>(str).<span style="color: #4b69c6">join</span>().<span style="color: #4b69c6">slice</span>(<span style="color: #b60157">0</span>, <span style="color: #b60157">14</span>))<br><span style="color: #d73948">let</span> rng <span style="color: #d73948">=</span> <span style="color: #4b69c6">gen-rng</span>(seed)<br><br><span style="color: #74747c">// 記事リストをシャッフル</span><br><span style="color: #d73948">let</span> (_, indices) <span style="color: #d73948">=</span> <span style="color: #4b69c6">shuffle-f</span>(rng, <span style="color: #4b69c6">range</span>(other-posts.<span style="color: #4b69c6">len</span>()))<br><br><span style="color: #74747c">// 上位3件を取得</span><br><span style="color: #d73948">let</span> picks <span style="color: #d73948">=</span> indices.<span style="color: #4b69c6">slice</span>(<span style="color: #b60157">0</span>, <span style="color: #b60157">3</span>).<span style="color: #4b69c6">map</span>(i <span style="color: #d73948">=></span> other-posts.<span style="color: #4b69c6">at</span>(i))</code></pre>
            <h3 id="loc-6">3.3. 記事の情報をTypstで管理する</h3>
            <p>トップページの記事一覧やRSSフィードを生成するには、全記事のメタデータ（タイトルや更新日）が必要です。 今回は<code>posts.typ</code>というファイルをデータベース代わりに使用するアーキテクチャを採用しました。</p>
            <pre><code data-lang="typ"><span style="color: #d73948">#</span><span style="color: #d73948">let</span> post-data <span style="color: #d73948">=</span> (<br>  <span style="color: #198810">"Typstでブログを書く"</span>: (<br>    title: <span style="color: #198810">"Typstでブログを書く"</span>,<br>    create: <span style="color: #4b69c6">datetime</span>(year: <span style="color: #b60157">2025</span>, month: <span style="color: #b60157">12</span>, day: <span style="color: #b60157">14</span>),<br>    update: <span style="color: #4b69c6">datetime</span>(year: <span style="color: #b60157">2025</span>, month: <span style="color: #b60157">12</span>, day: <span style="color: #b60157">15</span>),<br>    description: <span style="color: #198810">"Typst v0.14の新機能を使って、Typstだけでブログシステムを構築する試み。"</span>,<br>    tags: (<span style="color: #198810">"Typst"</span>, <span style="color: #198810">"HTML"</span>),<br>  ),<br>  <span style="color: #198810">"テスト"</span>: (<br>    title: <span style="color: #198810">"テスト"</span>,<br>    create: <span style="color: #4b69c6">datetime</span>(year: <span style="color: #b60157">2025</span>, month: <span style="color: #b60157">12</span>, day: <span style="color: #b60157">12</span>),<br>    update: <span style="color: #d73948">none</span>,<br>    description: <span style="color: #198810">"サイトの表示テスト"</span>,<br>    tags: (<span style="color: #198810">"テスト"</span>,),<br>  ),<br>)<br><br><span style="color: #4b69c6">#</span><span style="color: #4b69c6">metadata</span>(post-data) <span style="color: #1d6c76">&lt;post-list></span></code></pre>
            <p>Typstファイル内からは<code>import</code>することで辞書としてデータを扱えます：</p>
            <pre><code data-lang="typ"><span style="color: #d73948">#</span><span style="color: #d73948">import</span> <span style="color: #198810">"../template.typ"</span>: project<br><span style="color: #d73948">#</span><span style="color: #d73948">import</span> <span style="color: #198810">"../posts.typ"</span>: post-data<br><span style="color: #d73948">#</span><span style="color: #d73948">let</span> meta <span style="color: #d73948">=</span> post-data.<span style="color: #4b69c6">at</span>(<span style="color: #198810">"Typstでブログを書く"</span>)<br><span style="color: #d73948">#</span><span style="color: #d73948">show</span>: project.<span style="color: #4b69c6">with</span>(<span style="color: #d73948">..</span>meta)</code></pre>
            <p>一方、ビルドスクリプト（Python）からは<code>typst query</code>コマンドを使用することで同じ情報をJSON形式で取得できます。</p>
            <pre><code data-lang="py">result <span style="color: #d73948">=</span> subprocess.<span style="color: #4b69c6">run</span>(<br>    [<span style="color: #198810">"</span><span style="color: #198810">typst</span><span style="color: #198810">"</span>, <span style="color: #198810">"</span><span style="color: #198810">query</span><span style="color: #198810">"</span>, <span style="color: #198810">"</span><span style="color: #198810">posts.typ</span><span style="color: #198810">"</span>, <span style="color: #198810">"</span><span style="color: #198810">&lt;post-list></span><span style="color: #198810">"</span>],<br>    capture_output<span style="color: #d73948">=</span><span style="color: #d73948">True</span>,<br>    text<span style="color: #d73948">=</span><span style="color: #d73948">True</span>,<br>    check<span style="color: #d73948">=</span><span style="color: #d73948">True</span>,<br>    encoding<span style="color: #d73948">=</span><span style="color: #198810">"</span><span style="color: #198810">utf-8</span><span style="color: #198810">"</span><br>)<br>data <span style="color: #d73948">=</span> json.<span style="color: #4b69c6">loads</span>(result.stdout)</code></pre>
            <p>これにより、MarkdownのFrontmatterのようなメタデータ管理をTypstの文法だけで統一して行えるようになりました。</p>
            <h3 id="loc-7">3.4. 未実装機能への対処</h3>
            <p>HTMLエクスポートは発展途上のため数式や脚注などで工夫が必要な場面がありました。</p>
            <h4 id="loc-8">3.4.1. 数式(Math)をSVG化して埋め込む</h4>
            <p>現状、数式のHTML化は完全ではありません。 そこで<code>html.frame</code>を使って数式を一度フレーム（画像扱い）にし、SVGとしてHTML内に埋め込むことで表示しています。</p>
            <pre><code data-lang="typc"><span style="color: #d73948">show</span> math.equation.<span style="color: #4b69c6">where</span>(block: <span style="color: #d73948">false</span>): it <span style="color: #d73948">=></span> {<br>  html.<span style="color: #4b69c6">elem</span>(<span style="color: #198810">"span"</span>, attrs: (role: <span style="color: #198810">"math"</span>), html.<span style="color: #4b69c6">frame</span>(it))<br>}<br><span style="color: #d73948">show</span> math.equation.<span style="color: #4b69c6">where</span>(block: <span style="color: #d73948">true</span>): it <span style="color: #d73948">=></span> {<br>  html.<span style="color: #4b69c6">elem</span>(<span style="color: #198810">"figure"</span>, attrs: (role: <span style="color: #198810">"math"</span>), html.<span style="color: #4b69c6">frame</span>(it))<br>}</code></pre>
            <h4 id="loc-9">3.4.2. カスタムHTML構造での注釈(Footnote)</h4>
            <p><code>html.html</code>で独自のDOM構造を作ると、標準の<code>footnote</code>がエラーになる制限があります(<a href="#custom_dom_footnote">コード 2</a>)。 これに対しては、Typstのcounter機能を使って自前で脚注システムを実装することで解決しました。</p>
            <figure id="custom_dom_footnote">
              <pre><code>error: footnotes are not currently supported in combination with a custom `&lt;html>` or `&lt;body>` element<br>   ┌─ \\?\G:\マイドライブ\bibouroku.minimarimo3.jp\テスト\index.typ:97:16<br>   │<br>97 │ これがノートを付けられる対象1#footnote[footnoteの中身1]<br>   │                               ^^^^^^^^^^^^^^^^^^^^^^^^^<br>   │<br>   = hint: you can still use footnotes with a custom footnote show rule</code></pre>
              <figcaption>コード 2: 独自のDOM構造でfootnoteを使用した際に出るエラー</figcaption>
            </figure>
            <pre><code data-lang="typc"><span style="color: #d73948">let</span> note-counter <span style="color: #d73948">=</span> <span style="color: #4b69c6">counter</span>(<span style="color: #198810">"my-footnote"</span>)<br><span style="color: #d73948">show</span> <span style="color: #4b69c6">footnote</span>: it <span style="color: #d73948">=></span> {<br>  note-counter.<span style="color: #4b69c6">step</span>()<br>  <span style="color: #d73948">let</span> num <span style="color: #d73948">=</span> note-counter.<span style="color: #4b69c6">get</span>().<span style="color: #4b69c6">first</span>()<br>  <span style="color: #74747c">// CSSでツールチップ表示するためのHTML構造を出力</span><br>  html.<span style="color: #4b69c6">span</span>(class: <span style="color: #198810">"footnote-wrapper"</span>, {<br>    html.<span style="color: #4b69c6">span</span>(class: <span style="color: #198810">"footnote-marker"</span>, <span style="color: #198810">"※"</span> <span style="color: #d73948">+</span> <span style="color: #4b69c6">str</span>(num))<br>    html.<span style="color: #4b69c6">span</span>(class: <span style="color: #198810">"footnote-content"</span>, it.body)<br>  })<br>}</code></pre>
            <h2 id="loc-10">4. まとめ</h2>
            <p>TypstのHTML生成機能はまだ実験的な側面もありますが、個人のブログやドキュメントサイト構築には十分実用できるレベルに達していると感じました。 何より、普段のドキュメント作成で慣れ親しんだTypst記法がそのままWebサイトとして出力される体験は、非常に快適です。</p>
            <p>皆さんもぜひ、Typstで自分だけのWebサイトを作ってみてください！</p>
            <section role="doc-bibliography">
              <h2 id="loc-11">参考文献</h2>
              <ul style="list-style-type: none">
                <li id="loc-12"><span class="prefix"><a href="#loc-1" role="doc-backlink">[1]</a></span> L. Mädje と M. Haug, 「Typst: Typst 0.14: Now accessible – Typst Blog」, Typst. 参照: 2025年12月19日. [Online]. 入手先: <a href="https://typst.app/blog/2025/typst-0.14#richer-html-export:~:text=Most%20semantic%20elements%20(those%20from%20the%20Model%20category)%20are%20now%20properly%20mapped%20to%20semantic%20HTML.%20We%27ve%20also%20improved%20handling%20of%20textual%20content%20in%20HTML%20export.">https://typst.app/blog/2025/typst-0.14#richer-html-export:~:text=Most%20semantic%20elements%20(those%20from%20the%20Model%20category)%20are%20now%20properly%20mapped%20to%20semantic%20HTML.%20We%27ve%20also%20improved%20handling%20of%20textual%20content%20in%20HTML%20export.</a></li>
              </ul>
            </section>
          </div>
        </article>
        <section class="share-feedback-section">
          <hr class="section-divider">
          <div class="share-area">
            <h3>この記事をシェアする</h3>
            <div class="share-buttons"><button class="share-btn btn-x" onclick="shareX()">Xでポスト</button><button class="share-btn btn-misskey" onclick="shareMisskey()">Misskeyでノート</button><button class="share-btn btn-copy" onclick="copyInfo()">タイトルと概要をコピー</button></div>
          </div>
          <div class="feedback-area">
            <h3>ご意見・ご感想</h3>
            <p>記事に関するご意見や誤字の報告などをお待ちしています。</p>
            <button class="feedback-link" onclick="openFeedback('https://docs.google.com/forms/d/e/1FAIpQLSdyN8Q-zohUmlOxASKnJjwSSgs-S0PkHZMXDg2Zh8GgSTgOkQ/viewform', 'entry.629693238')">Googleフォームで送る</button>
          </div>
        </section>
        <hr class="section-divider">
        <section class="related-posts">
          <h2 class="section-title">その他の記事</h2>
          <div class="card-grid"><a class="post-card" href="/テスト/"><div class="card-content"><p><time class="card-date">2025-12-12</time></p><h3 class="card-title">テスト</h3><p class="card-desc">サイトの表示テスト</p></div></a></div>
        </section>
      </main>
      <aside class="sidebar">
        <div class="sidebar-inner">
          <div class="sidebar-widget toc-widget">
            <h3 class="widget-title">目次</h3>
            <nav role="doc-toc">
              <ol style="list-style-type: none">
                <li><a href="#はじめに"><span class="prefix">1.</span> はじめに</a></li>
                <li><a href="#loc-2"><span class="prefix">2.</span> ファイル構成</a></li>
                <li>
                  <div><a href="#loc-3"><span class="prefix">3.</span> 実装</a></div>
                  <ol style="list-style-type: none">
                    <li><a href="#loc-4"><span class="prefix">3.1.</span> <code>html.html</code>で出力されるHTMLの構造をカスタマイズ</a></li>
                    <li><a href="#loc-5"><span class="prefix">3.2.</span> 関連記事のランダム生成</a></li>
                    <li><a href="#loc-6"><span class="prefix">3.3.</span> 記事の情報をTypstで管理する</a></li>
                    <li>
                      <div><a href="#loc-7"><span class="prefix">3.4.</span> 未実装機能への対処</a></div>
                      <ol style="list-style-type: none">
                        <li><a href="#loc-8"><span class="prefix">3.4.1.</span> 数式(Math)をSVG化して埋め込む</a></li>
                        <li><a href="#loc-9"><span class="prefix">3.4.2.</span> カスタムHTML構造での注釈(Footnote)</a></li>
                      </ol>
                    </li>
                  </ol>
                </li>
                <li><a href="#loc-10"><span class="prefix">4.</span> まとめ</a></li>
                <li><a href="#loc-11">参考文献</a></li>
              </ol>
            </nav>
          </div>
          <div class="sidebar-widget">
            <h3 class="widget-title">Author</h3>
            <p><strong>minimarimo3</strong></p>
            <p style="font-size: 0.85rem; color: var(--text-muted); margin-top: 0.5em;">Typstが好きです。</p>
          </div>
        </div>
      </aside>
    </div>
  </body>
</html>
